# Understanding Google Analytics Custom Events

This document explains what custom events are in Google Analytics (GA4), how to create them, and how they can be used to measure important user interactions on your website.

---

## 1. What are Custom Events?

While Google Analytics automatically tracks basic events like `page_view` and `scroll`, **custom events** allow you to measure specific interactions that are unique and important to your business goals.

For your admissions website, these could be actions like:
-   **`form_submit`**: A user successfully submits an enquiry form. (This is your most important event!)
-   **`explore_programs_click`**: A user clicks the "Explore Programs" button in the hero section.
-   **`program_search`**: A user starts a search in the mega menu.
-   **`college_link_click`**: A user clicks a specific college link from the navigation or footer.
-   **`contact_click`**: A user clicks on a phone number or email address.

By tracking these, you can understand exactly how users are interacting with your site's key features and build detailed reports on user behavior.

---

## 2. What are "Key Events" (formerly Conversions)?

A **Key Event** is any event that you consider valuable to your business. When you mark an event as a key event in the Google Analytics UI, GA4 will treat it as a conversion.

For your website, the most important key event is a successful form submission. By marking the `form_submit` event as a key event, you can:
-   Track your website's conversion rate.
-   See which traffic sources (e.g., Google Search, Facebook Ads) are driving the most applications.
-   Optimize your marketing campaigns to focus on what works.

> **Note:** Any event you create can be turned into a key event with a simple toggle in the GA4 interface.

---

## 3. How to Create and Install Events

There are two primary ways to create events: without code (in the GA UI) or with code (on your website). For a custom application like yours, the "Create with code" method is the most reliable and powerful.

### Method 1: Create Without Code (In the GA UI)

This method is useful for creating a new event based on an *existing* event. For example, you could create a new event called `engineering_page_view` that triggers every time a `page_view` event occurs on a page with `/engineering/` in the URL.

-   **Use Case:** Good for simple events based on page views or other standard interactions without needing to change the website's code.
-   **Limitation:** It's not suitable for tracking unique interactions like a successful form submission, which requires validation and happens after a user action.

### Method 2: Create With Code (Recommended for Your App)

This is the recommended approach for your application. You add a small snippet of JavaScript to your website to send an event to Google Analytics whenever a specific action occurs.

Your application is already set up with a helper function to make this easy.

**File:** `src/lib/gtag.ts`

This file contains an `event` function that you can call from any client-side component or page.

```javascript
// src/lib/gtag.ts
export const event = ({ action, category, label, value }) => {
  if (!GA_MEASUREMENT_ID || typeof window.gtag !== 'function') return;
  window.gtag('event', action, {
    event_category: category,
    event_label: label,
    value: value,
  });
};
```

#### **How to Use It in Your Website (Code Examples)**

**Example 1: Tracking a Form Submission (Already Implemented)**

Let's look at how the successful form submission event is implemented in your `AdmissionForm` component.

**File:** `src/components/admission-form.tsx`

```typescript
'use client';

// ... other imports
import * as gtag from '@/lib/gtag'; // 1. Import the gtag helper

// ...

export function AdmissionForm() {
  // ... form setup

  async function onSubmit(values: z.infer<typeof formSchema>) {
    // ... payload preparation

    try {
      const result = await submitLead(apiPayload);

      if (result && result.success) {
        
        // 2. Call the event function on success
        gtag.event({
          action: 'form_submit',      // This is the event name
          category: 'Admissions',
          label: 'Admission Form Submitted',
        });

        // ... redirect the user to the success page
      } else {
        throw new Error(result.message);
      }
    } catch (error: any) {
      // ... handle error
    }
  }

  // ... rest of the component
}
```

**Example 2: Tracking a Button Click (New Implementation)**

Here is how we can track clicks on the header icons.

**File:** `src/components/site-header.tsx`

```typescript
'use client';

// ... other imports
import { Search, Calendar } from 'lucide-react';
import * as gtag from '@/lib/gtag'; // 1. Import the gtag helper

export function SiteHeader() {
  // ...
  return (
    // ...
    <div className="flex flex-1 items-center justify-end space-x-2">
        <Button variant="ghost" size="icon" className="hidden md:inline-flex" 
            onClick={() => gtag.event({ // 2. Add the onClick handler
                action: 'search_click', 
                category: 'Header', 
                label: 'Search Icon' 
            })}>
            <Search className="h-5 w-5" />
            <span className="sr-only">Search</span>
        </Button>
        <Button variant="ghost" size="icon" className="hidden md:inline-flex"
            onClick={() => gtag.event({ // 3. Add another for the calendar
                action: 'events_click', 
                category: 'Header', 
                label: 'Events Icon' 
            })}>
            <Calendar className="h-5 w-5" />
            <span className="sr-only">Events</span>
        </Button>
        {/* ... more buttons */}
    </div>
    // ...
  );
}
```

By following this pattern, you can add custom event tracking to any user interaction across your website.